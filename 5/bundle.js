(()=>{var t={484:function(t){t.exports=function(){"use strict";var t=6e4,e=36e5,n="millisecond",i="second",l="minute",s="hour",a="day",o="week",r="month",m="quarter",c="year",d="date",h="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,u=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},_=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},g={s:_,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),l=n%60;return(e<=0?"+":"-")+_(i,2,"0")+":"+_(l,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var i=12*(n.year()-e.year())+(n.month()-e.month()),l=e.clone().add(i,r),s=n-l<0,a=e.clone().add(i+(s?-1:1),r);return+(-(i+(n-l)/(s?l-a:a-l))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:r,y:c,w:o,d:a,D:d,h:s,m:l,s:i,ms:n,Q:m}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},v="en",$={};$[v]=p;var y=function(t){return t instanceof M},w=function t(e,n,i){var l;if(!e)return v;if("string"==typeof e){var s=e.toLowerCase();$[s]&&(l=s),n&&($[s]=n,l=s);var a=e.split("-");if(!l&&a.length>1)return t(a[0])}else{var o=e.name;$[o]=e,l=o}return!i&&l&&(v=l),l||!i&&v},b=function(t,e){if(y(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new M(n)},C=g;C.l=w,C.i=y,C.w=function(t,e){return b(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var M=function(){function p(t){this.$L=w(t.locale,null,!0),this.parse(t)}var _=p.prototype;return _.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(C.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(f);if(i){var l=i[2]-1||0,s=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],l,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)):new Date(i[1],l,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},_.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},_.$utils=function(){return C},_.isValid=function(){return!(this.$d.toString()===h)},_.isSame=function(t,e){var n=b(t);return this.startOf(e)<=n&&n<=this.endOf(e)},_.isAfter=function(t,e){return b(t)<this.startOf(e)},_.isBefore=function(t,e){return this.endOf(e)<b(t)},_.$g=function(t,e,n){return C.u(t)?this[e]:this.set(n,t)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(t,e){var n=this,m=!!C.u(e)||e,h=C.p(t),f=function(t,e){var i=C.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return m?i:i.endOf(a)},u=function(t,e){return C.w(n.toDate()[t].apply(n.toDate("s"),(m?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},p=this.$W,_=this.$M,g=this.$D,v="set"+(this.$u?"UTC":"");switch(h){case c:return m?f(1,0):f(31,11);case r:return m?f(1,_):f(0,_+1);case o:var $=this.$locale().weekStart||0,y=(p<$?p+7:p)-$;return f(m?g-y:g+(6-y),_);case a:case d:return u(v+"Hours",0);case s:return u(v+"Minutes",1);case l:return u(v+"Seconds",2);case i:return u(v+"Milliseconds",3);default:return this.clone()}},_.endOf=function(t){return this.startOf(t,!1)},_.$set=function(t,e){var o,m=C.p(t),h="set"+(this.$u?"UTC":""),f=(o={},o[a]=h+"Date",o[d]=h+"Date",o[r]=h+"Month",o[c]=h+"FullYear",o[s]=h+"Hours",o[l]=h+"Minutes",o[i]=h+"Seconds",o[n]=h+"Milliseconds",o)[m],u=m===a?this.$D+(e-this.$W):e;if(m===r||m===c){var p=this.clone().set(d,1);p.$d[f](u),p.init(),this.$d=p.set(d,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](u);return this.init(),this},_.set=function(t,e){return this.clone().$set(t,e)},_.get=function(t){return this[C.p(t)]()},_.add=function(n,m){var d,h=this;n=Number(n);var f=C.p(m),u=function(t){var e=b(h);return C.w(e.date(e.date()+Math.round(t*n)),h)};if(f===r)return this.set(r,this.$M+n);if(f===c)return this.set(c,this.$y+n);if(f===a)return u(1);if(f===o)return u(7);var p=(d={},d[l]=t,d[s]=e,d[i]=1e3,d)[f]||1,_=this.$d.getTime()+n*p;return C.w(_,this)},_.subtract=function(t,e){return this.add(-1*t,e)},_.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var i=t||"YYYY-MM-DDTHH:mm:ssZ",l=C.z(this),s=this.$H,a=this.$m,o=this.$M,r=n.weekdays,m=n.months,c=function(t,n,l,s){return t&&(t[n]||t(e,i))||l[n].slice(0,s)},d=function(t){return C.s(s%12||12,t,"0")},f=n.meridiem||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:C.s(o+1,2,"0"),MMM:c(n.monthsShort,o,m,3),MMMM:c(m,o),D:this.$D,DD:C.s(this.$D,2,"0"),d:String(this.$W),dd:c(n.weekdaysMin,this.$W,r,2),ddd:c(n.weekdaysShort,this.$W,r,3),dddd:r[this.$W],H:String(s),HH:C.s(s,2,"0"),h:d(1),hh:d(2),a:f(s,a,!0),A:f(s,a,!1),m:String(a),mm:C.s(a,2,"0"),s:String(this.$s),ss:C.s(this.$s,2,"0"),SSS:C.s(this.$ms,3,"0"),Z:l};return i.replace(u,(function(t,e){return e||p[t]||l.replace(":","")}))},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(n,d,h){var f,u=C.p(d),p=b(n),_=(p.utcOffset()-this.utcOffset())*t,g=this-p,v=C.m(this,p);return v=(f={},f[c]=v/12,f[r]=v,f[m]=v/3,f[o]=(g-_)/6048e5,f[a]=(g-_)/864e5,f[s]=g/e,f[l]=g/t,f[i]=g/1e3,f)[u]||g,h?v:C.a(v)},_.daysInMonth=function(){return this.endOf(r).$D},_.$locale=function(){return $[this.$L]},_.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),i=w(t,e,!0);return i&&(n.$L=i),n},_.clone=function(){return C.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},p}(),S=M.prototype;return b.prototype=S,[["$ms",n],["$s",i],["$m",l],["$H",s],["$W",a],["$M",r],["$y",c],["$D",d]].forEach((function(t){S[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),b.extend=function(t,e){return t.$i||(t(e,M,b),t.$i=!0),b},b.locale=w,b.isDayjs=y,b.unix=function(t){return b(1e3*t)},b.en=$[v],b.Ls=$,b.p={},b}()}},e={};function n(i){var l=e[i];if(void 0!==l)return l.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t="beforebegin",e="afterbegin",i="beforeend",l="afterend",s=t=>{const e=document.createElement("div");return e.innerHTML=t,e.firstElementChild},a=function(n,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;const o=n.element;switch(a){case t:s.before(o);break;case e:s.prepend(o);break;case i:s.append(o);break;case l:s.after(o)}};class o{#t=null;get template(){return'<section class="films"></section>'}get element(){return this.#t||(this.#t=s(this.template)),this.#t}removeElement(){this.#t=null}}class r{#e=null;#n=null;#t=null;constructor(t,e){this.#e=t,this.#n=e}get template(){return t=this.#e,`<section class="films-list ${(e=this.#n)?"films-list--extra":""}">\n<h2 class="films-list__title ${e?"":"visually-hidden"}">${t}</h2>\n</section>`;var t,e}get element(){return this.#t||(this.#t=s(this.template)),this.#t}removeElement(){this.#t=null}}class m{#i=[];#t=null;constructor(t){this.#i=(t=>Object.entries({watchlist:t=>t.filter((t=>t.userDetails.watchlist)).length,history:t=>t.filter((t=>t.userDetails.alreadyWatched)).length,favorites:t=>t.filter((t=>t.userDetails.favorite)).length}).map((e=>{let[n,i]=e;return{name:n,count:i(t)}})))(t)}get template(){return`<nav class="main-navigation">\n  <a href="#all" class="main-navigation__item main-navigation__item--active">All movies</a>\n  ${this.#i.map((t=>(t=>`<a href="#${t.name}" class="main-navigation__item">${t.name.charAt(0).toUpperCase()+t.name.slice(1)} <span class="main-navigation__item-count">${t.count}</span></a>`)(t))).join(" ")}\n</nav>`}get element(){return this.#t||(this.#t=s(this.template)),this.#t}removeElement(){this.#t=null}}class c{#t=null;get template(){return'<ul class="sort">\n<li><a href="#" class="sort__button sort__button--active">Sort by default</a></li>\n<li><a href="#" class="sort__button">Sort by date</a></li>\n<li><a href="#" class="sort__button">Sort by rating</a></li>\n</ul>'}get element(){return this.#t||(this.#t=s(this.template)),this.#t}removeElement(){this.#t=null}}var d=n(484),h=n.n(d);class f{#l={};#t=null;constructor(t){this.#l=t}get template(){return`<article class="film-card" id=${(t=this.#l).id}>\n<a class="film-card__link">\n  <h3 class="film-card__title">${t.filmInfo.title}</h3>\n  <p class="film-card__rating">${t.filmInfo.totalRating}</p>\n  <p class="film-card__info">\n    <span class="film-card__year">${h()(t.filmInfo.release.date).year()}</span>\n    <span class="film-card__duration">1h 59m</span>\n    <span class="film-card__genre">${t.filmInfo.genre[0]}</span>\n  </p>\n  <img src="${t.filmInfo.poster}" alt="" class="film-card__poster">\n  <p class="film-card__description">${t.filmInfo.description.length>140?`${t.filmInfo.description.slice(0,139)}...`:t.filmInfo.description}</p>\n  <span class="film-card__comments">${t.comments.length} ${1===t.comments.length?"comment":"comments"}</span>\n</a>\n<div class="film-card__controls">\n  <button class="film-card__controls-item film-card__controls-item--add-to-watchlist" type="button">Add to watchlist</button>\n  <button class="film-card__controls-item film-card__controls-item--mark-as-watched film-card__controls-item--active" type="button">Mark as watched</button>\n  <button class="film-card__controls-item film-card__controls-item--favorite" type="button">Mark as favorite</button>\n</div>\n</article>`;var t}get element(){return this.#t||(this.#t=s(this.template)),this.#t}removeElement(){this.#t=null}}const u={novice:[1,10],fan:[11,20],"Movie Buff":[21,1/0]},p=t=>Object.entries(u).filter((e=>{let[,n]=e;return t>=n[0]&&t<=n[1]})).flat();class _{#s=null;#t=null;constructor(t){this.#s=t.filter((t=>t.userDetails.alreadyWatched)).length}get template(){return`<section class="header__profile profile">\n${0!==(t=this.#s)?`<p class="profile__rating">${p(t)[0].charAt(0).toUpperCase()+p(t)[0].slice(1)}</p>`:""}\n<img class="profile__avatar" src="images/bitmap@2x.png" alt="Avatar" width="35" height="35">\n</section>`;var t}get element(){return this.#t||(this.#t=s(this.template)),this.#t}removeElement(){this.#t=null}}class g{#a=null;#t=null;constructor(t){this.#a=t.length}get template(){return`<p>${this.#a} movies inside</p>`}get element(){return this.#t||(this.#t=s(this.template)),this.#t}removeElement(){this.#t=null}}class v{#t=null;get element(){return this.#t||(this.#t=s(this.template)),this.#t}get template(){return'<h2 class="films-list__title">There are no movies in our database</h2>'}removeElement(){this.#t=null}}class ${#t=null;get template(){return'<div class="films-list__container"></div>'}get element(){return this.#t||(this.#t=s(this.template)),this.#t}removeElement(){this.#t=null}}class y{#t;get template(){return'<button class="films-list__show-more">Show more</button>'}get element(){return this.#t||(this.#t=s(this.template)),this.#t}removeElement(){this.#t=null}}const w=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=Math.ceil(Math.min(t,e)),i=Math.floor(Math.max(t,e));return Math.floor(n+Math.random()*(i-n+1))},b=t=>Array.from({length:t},((t,e)=>e+1)),C=t=>t[w(0,t.length-1)],M=()=>{const t=w(-1,-60);return h()().add(t,"day").toDate()};class S{#o={};#r=[];#t=null;constructor(t){this.#o=t.filmInfo,this.#r=t.comments}get template(){return t=this.#o,e=this.#r,`<section class="film-details">\n<form class="film-details__inner" action="" method="get">\n  <div class="film-details__top-container">\n    <div class="film-details__close">\n      <button class="film-details__close-btn" type="button">close</button>\n    </div>\n    <div class="film-details__info-wrap">\n      <div class="film-details__poster">\n        <img class="film-details__poster-img" src="./${t.poster}" alt="">\n\n        <p class="film-details__age">${t.ageRating}+</p>\n      </div>\n\n      <div class="film-details__info">\n        <div class="film-details__info-head">\n          <div class="film-details__title-wrap">\n            <h3 class="film-details__title">${t.title}</h3>\n            <p class="film-details__title-original">${t.alternativeTitle}</p>\n          </div>\n\n          <div class="film-details__rating">\n            <p class="film-details__total-rating">${t.totalRating}</p>\n          </div>\n        </div>\n\n        <table class="film-details__table">\n          <tbody><tr class="film-details__row">\n            <td class="film-details__term">Director</td>\n            <td class="film-details__cell">${t.director}</td>\n          </tr>\n          <tr class="film-details__row">\n            <td class="film-details__term">Writers</td>\n            <td class="film-details__cell">${t.writers.join(", ")}</td>\n          </tr>\n          <tr class="film-details__row">\n            <td class="film-details__term">Actors</td>\n            <td class="film-details__cell">${t.actors.join(", ")}</td>\n          </tr>\n          <tr class="film-details__row">\n            <td class="film-details__term">Release Date</td>\n            <td class="film-details__cell">${i=t.release.date,h()(i).format("DD MMMM YYYY")}</td>\n          </tr>\n          <tr class="film-details__row">\n            <td class="film-details__term">Runtime</td>\n            <td class="film-details__cell">${n=t.runtime,`${Math.trunc(n/60)}h ${n%60}m`}</td>\n          </tr>\n          <tr class="film-details__row">\n            <td class="film-details__term">Country</td>\n            <td class="film-details__cell">${t.release.releaseCountry}</td>\n          </tr>\n          <tr class="film-details__row">\n            <td class="film-details__term">Genres</td>\n            <td class="film-details__cell">\n              ${t.genre.map((t=>`<span class="film-details__genre">${t}</span>`)).join(" ")}\n              </td>\n          </tr>\n        </tbody></table>\n\n        <p class="film-details__film-description">\n          ${t.description}\n        </p>\n      </div>\n    </div>\n\n    <section class="film-details__controls">\n      <button type="button" class="film-details__control-button film-details__control-button--watchlist" id="watchlist" name="watchlist">Add to watchlist</button>\n      <button type="button" class="film-details__control-button film-details__control-button--active film-details__control-button--watched" id="watched" name="watched">Already watched</button>\n      <button type="button" class="film-details__control-button film-details__control-button--favorite" id="favorite" name="favorite">Add to favorites</button>\n    </section>\n  </div>\n\n  <div class="film-details__bottom-container">\n    <section class="film-details__comments-wrap">\n      <h3 class="film-details__comments-title">Comments <span class="film-details__comments-count">${e.length}</span></h3>\n\n      <ul class="film-details__comments-list">\n\n      </ul>\n\n      <div class="film-details__new-comment">\n        <div class="film-details__add-emoji-label"></div>\n\n        <label class="film-details__comment-label">\n          <textarea class="film-details__comment-input" placeholder="Select reaction below and write comment here" name="comment"></textarea>\n        </label>\n\n        <div class="film-details__emoji-list">\n          <input class="film-details__emoji-item visually-hidden" name="comment-emoji" type="radio" id="emoji-smile" value="smile">\n          <label class="film-details__emoji-label" for="emoji-smile">\n            <img src="./images/emoji/smile.png" width="30" height="30" alt="emoji">\n          </label>\n\n          <input class="film-details__emoji-item visually-hidden" name="comment-emoji" type="radio" id="emoji-sleeping" value="sleeping">\n          <label class="film-details__emoji-label" for="emoji-sleeping">\n            <img src="./images/emoji/sleeping.png" width="30" height="30" alt="emoji">\n          </label>\n\n          <input class="film-details__emoji-item visually-hidden" name="comment-emoji" type="radio" id="emoji-puke" value="puke">\n          <label class="film-details__emoji-label" for="emoji-puke">\n            <img src="./images/emoji/puke.png" width="30" height="30" alt="emoji">\n          </label>\n\n          <input class="film-details__emoji-item visually-hidden" name="comment-emoji" type="radio" id="emoji-angry" value="angry">\n          <label class="film-details__emoji-label" for="emoji-angry">\n            <img src="./images/emoji/angry.png" width="30" height="30" alt="emoji">\n          </label>\n        </div>\n      </div>\n    </section>\n  </div>\n</form>\n</section>`;var t,e,n,i}get element(){return this.#t||(this.#t=s(this.template)),this.#t}removeElement(){this.#t=null}}class D{#m={};#t=null;constructor(t){this.#m=t}get template(){return`<li class="film-details__comment">\n<span class="film-details__comment-emoji">\n  <img src="./images/emoji/${(t=this.#m).emotion}.png" width="55" height="55" alt="emoji-${t.emotion}">\n</span>\n<div>\n  <p class="film-details__comment-text">${t.comment}</p>\n  <p class="film-details__comment-info">\n    <span class="film-details__comment-author">${t.author}</span>\n    <span class="film-details__comment-day">${(t=>{const e=h()(t),n=h()().diff(e,"days");return n<=1?"Today":n>1&&n<=30?`${n} days ago`:h()(t).format("YYYY/MM/DD HH:MM")})(t.date)}</span>\n    <button class="film-details__comment-delete">Delete</button>\n  </p>\n</div>\n</li>`;var t}get element(){return this.#t||(this.#t=s(this.template)),this.#t}removeElement(){this.#t=null}}const j=["The Dance of Life","Sagebrush Trail","The Man with the Golden Arm","Santa Claus Conquers the Martians","Popeye the Sailor Meets Sindbad the Sailor"],L=["Жизнь и репутация Питера Паркера оказываются под угрозой, поскольку Мистерио раскрыл всему миру тайну личности Человека-паука.","После двух лет поисков правосудия на улицах Готэма для своих сограждан Бэтмен становится олицетворением беспощадного возмездия. ","Уверенная в себе 13-летняя Мэй Ли разрывается между тем, чтобы оставаться прилежной и послушной маминой дочкой.","1909 г. Два отважных исследователя отправляются на поиски следов датской экспедиции, участники которой исследовали Гренландию.","Служба в армии с детства была мечтой Джеймса Рида, а зеленый берет — предметом гордости. ","Действие разворачивается в детском лагере «Красный сокол».","Ветеран Уилл Шарп отчаянно нуждается в деньгах, чтобы спасти смертельно больную жену.","Ноа после череды неудачных свиданий отчаивается найти подходящего партнера с помощью приложение для знакомств.","В постапокалиптическом мире шесть солдат, выполняющих секретную миссию, должны перевезти особый груз через замерзший архипелаг.","История жизни и приключений легендарного советского боксера Валерия Попенченко, чемпиона СССР.","Питер и Эмма никогда не были знакомы, но их мгновенно связывает одна вещь..."],E=["Action","Drama","Comedy","Fantasy","Romance","Criminal"],F=["made-for-each-other.png","popeye-meets-sinbad.png","sagebrush-trail.jpg","santa-claus-conquers-the-martians.jpg","the-dance-of-life.jpg","the-great-flamarion.jpg","the-man-with-the-golden-arm.jpg"],A=["Owen Grady","Claire Dearing","Alan Grant","Ellie Sattler","Ian Malcolm","Ramsay Cole","Dr. Zia Rodriguez"],k=["Chris Pratt","Bryce Dallas Howard","Sam Neill","Laura Dern","Jeff Goldblum","Mamoudou Athie","Scott Haze"],O=(t,e)=>({id:t,comments:Array.from({length:w(0,6)},(()=>C(e.map((t=>t.id))))),filmInfo:{title:C(j),alternativeTitle:"Laziness Who Sold Themselves",totalRating:w(10,100)/10,poster:`images/posters/${C(F)}`,ageRating:w(0,18),director:"Tom Ford",writers:Array.from({length:w(1,3)},(()=>C(A))),actors:Array.from({length:w(1,3)},(()=>C(k))),release:{date:M(),releaseCountry:"Finland"},runtime:w(1,100),genre:Array.from({length:w(1,3)},(()=>C(E))),description:C(L)},userDetails:{watchlist:Boolean(w(0,1)),alreadyWatched:Boolean(w(0,1)),watchingDate:M(),favorite:Boolean(w(0,1))}}),I=["Interesting setting and a good cast","Booooooooooring","Very very old. Meh","Almost two hours? Seriously?"],T=["Tim Merfy","Marry Jain","Top Hardy"],x=["smile","sleeping","puke","angry"],Y=document.querySelector(".main"),H=document.querySelector(".header"),R=document.querySelector(".footer__statistics"),W=new class{#c=null;#d=null;get comments(){return this.#c||(this.#c=b(5).map((t=>(t=>({id:t,author:C(T),comment:C(I),date:M(),emotion:`${C(x)}`}))(t)))),this.#c}get films(){return this.#d||(this.#d=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return b(t).map((t=>O(t,e)))}(13,this.#c)),this.#d}},B=new class{#h=null;#f=null;#u=null;#c=null;#d=null;#p=null;#_=5;#g=new c;#v=new o;#$=new r("All movies. Upcoming");#y=new $;#w=new r("Top rated",!0);#b=new $;#C=new r("Most commented",!0);#M=new $;#S=new y;#D=null;constructor(t,e,n,i){this.#h=t,this.#f=e,this.#u=n,this.#p=i,this.#c=[...this.#p.comments],this.#d=[...this.#p.films]}init=()=>{this.#j()};#L(t,e){const n=new f(t);a(n,e);const i=t=>{"Escape"!==t.key&&"Esc"!==t.key||s(t,this.#D)},l=t=>{s(t,this.#D)};function s(t,e){t.preventDefault(),e.element.remove(),e.removeElement(),document.removeEventListener("keydown",i),document.body.classList.remove("hide-overflow")}n.element.querySelector(".film-card__link").addEventListener("click",(()=>{document.body.classList.add("hide-overflow"),this.#D=new S(t),a(this.#D,document.body),this.#c.filter((e=>t.comments.includes(e.id))).forEach((t=>a(new D(t),this.#D.element.querySelector(".film-details__comments-list")))),document.addEventListener("keydown",i),this.#D.element.querySelector(".film-details__close-btn").addEventListener("click",l)}))}#E=t=>{t.preventDefault(),this.#d.slice(this.#_,this.#_+5).forEach((t=>this.#L(t,this.#y.element))),this.#_+=5,this.#d.length<=this.#_&&this.#S.element.remove()};#j(){if(a(new _(this.#d),this.#f),a(new g(this.#d),this.#u),a(new m(this.#d),this.#h),a(this.#g,this.#h),a(this.#v,this.#h),a(this.#$,this.#v.element),this.#d.length<1)return a(new v,this.#$.element),this.#g.element.remove(),this.#$.element.firstElementChild.remove(),!0;a(this.#C,this.#v.element),a(this.#w,this.#v.element),a(this.#y,this.#$.element),a(this.#b,this.#w.element),a(this.#M,this.#C.element),this.#d.slice(0,Math.min(this.#d.length,5)).forEach((t=>this.#L(t,this.#y.element))),this.#d.length>5&&(a(this.#S,this.#$.element),this.#S.element.addEventListener("click",this.#E)),this.#d.sort(((t,e)=>e.filmInfo.totalRating-t.filmInfo.totalRating)).slice(0,Math.min(this.#d.length,2)).forEach((t=>this.#L(t,this.#b.element))),this.#d.sort(((t,e)=>e.comments.length-t.comments.length)).slice(0,Math.min(this.#d.length,2)).forEach((t=>this.#L(t,this.#M.element)))}}(Y,H,R,W);B.init()})()})();
//# sourceMappingURL=bundle.js.map